<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shae Layout (Echo + Mode Toggle)</title>
  <style>
    body {
      margin: 0;
      padding: 2rem;
      font-family: Georgia, serif;
      transition: background-color 0.4s, color 0.4s;
    }

    pre {
      white-space: pre-wrap;
      font-size: 1rem;
      line-height: 1.6;
      transition: color 0.4s;
    }

    .light {
      background-color: #ffffff;
      color: #111111;
    }

    .dark {
      background-color: #000000;
      color: #ffffff;
    }

    .echo-0.light { color: #111111; }
    .echo-1.light { color: #555555; }
    .echo-2.light { color: #999999; }
    .echo-3.light { color: #cccccc; }

    .echo-0.dark { color: #ffffff; }
    .echo-1.dark { color: #bbbbbb; }
    .echo-2.dark { color: #777777; }
    .echo-3.dark { color: #444444; }

    button {
      margin-top: 2rem;
      font-family: Georgia, serif;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background: transparent;
      border: 1px solid currentColor;
      color: inherit;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }

    .button-container {
      text-align: center;
    }
  </style>
</head>
<body class="dark">
<pre id="poem">
Shae,

                                           imagine
                    been difficult       imagine       possibilities
   It hasn’t           difficult    to imagine the   possibilities 
                     difficult                     possibilities

                 hard
               hard to imagine                     a fantasy?
       is it hard    imagine   if it were all just     fantasy
                   imagine.                              fantasy
                                     challenge
                                   challenge
                                 challenge?                or…
          such a dilemma…                 a puzzle?        or…
               dilemma                    puzzle           or…
             dilemma                    puzzle             or…
                                                           or…
                a quiet quandary…                          or…
  
                or…
                                                           
                or…
              blessing                           sacred
            blessing      questions is        sacred start
          blessing these    questions   the sacred start
                              questions          start

                  with
                with         and allow…              surrender
        to be with… to hold…       allow     in full   surrender 
                         hold        allow               surrender
                           hold
          know                                investment
        know              is a wise         investment
      know that this care        wise     investment
                       care        wise
                         care


you are seen seen seen


thank you


you are invited
        invited
        invited
        invited
</pre>

<div class="button-container">
  <button id="toggle">Switch to Light Mode</button>
</div>

<script>
  const body = document.body;
  const poem = document.getElementById("poem");
  const toggle = document.getElementById("toggle");
  const target = "invited";

  // Add theme class to poem initially
  poem.classList.add("dark");

  // Highlight echo words
  function highlightEchoes() {
    const parts = poem.textContent.split(new RegExp(`\\b(${target})\\b`, "gi"));
    let count = 0;
    poem.innerHTML = parts.map(part => {
      if (part.toLowerCase() === target.toLowerCase()) {
        const className = `echo-${Math.min(count, 3)} ${body.classList.contains('dark') ? 'dark' : 'light'}`;
        count++;
        return `<span class="${className}">${part}</span>`;
      }
      return part;
    }).join('');
  }

  highlightEchoes();

  // Toggle light/dark mode
  toggle.addEventListener('click', () => {
    const isDark = body.classList.contains('dark');
    const newMode = isDark ? 'light' : 'dark';

    body.classList.remove('dark', 'light');
    poem.classList.remove('dark', 'light');
    body.classList.add(newMode);
    poem.classList.add(newMode);

    toggle.textContent = isDark ? 'Switch to Dark Mode' : 'Switch to Light Mode';

    // Rerun echo highlighting to apply correct class
    highlightEchoes();
  });
</script>
</body>
</html>
